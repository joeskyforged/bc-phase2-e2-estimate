import{g as Oe,j as Ie,r as ne,u as me,a as s,F as ke,b as Ne,c as De,d as Te,e as Le,s as Ae,f as Fe,h as Ee,l as je,i as Pe,k as Me,P as ze,m as Ue,H as qe,S as $e,R as Be,n as He}from"./SummaryPanel-LZj--AZ3.js";const Ke="modulepreload",We=function(O,L){return new URL(O,L).href},ve={},Je=function(L,j,c){let S=Promise.resolve();if(j&&j.length>0){let o=function(b){return Promise.all(b.map(B=>Promise.resolve(B).then(F=>({status:"fulfilled",value:F}),F=>({status:"rejected",reason:F}))))};const A=document.getElementsByTagName("link"),w=document.querySelector("meta[property=csp-nonce]"),Z=w?.nonce||w?.getAttribute("nonce");S=o(j.map(b=>{if(b=We(b,c),b in ve)return;ve[b]=!0;const B=b.endsWith(".css"),F=B?'[rel="stylesheet"]':"";if(c)for(let y=A.length-1;y>=0;y--){const W=A[y];if(W.href===b&&(!B||W.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${F}`))return;const I=document.createElement("link");if(I.rel=B?"stylesheet":Ke,B||(I.as="script"),I.crossOrigin="",I.href=b,Z&&I.setAttribute("nonce",Z),document.head.appendChild(I),B)return new Promise((y,W)=>{I.addEventListener("load",y),I.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${b}`)))})}))}function C(A){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=A,window.dispatchEvent(w),!w.defaultPrevented)throw A}return S.then(A=>{for(const w of A||[])w.status==="rejected"&&C(w.reason);return L().catch(C)})};var he={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Ve=he.exports,we;function Qe(){return we||(we=1,(function(O,L){((j,c)=>{O.exports=c()})(Ve,function j(){var c=typeof self<"u"?self:typeof window<"u"?window:c!==void 0?c:{},S,C=!c.document&&!!c.postMessage,A=c.IS_PAPA_WORKER||!1,w={},Z=0,o={};function b(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=fe(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new W(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(t,r){var i=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<i){let f=this._config.newline;f||(n=this._config.quoteChar||'"',f=this._handle.guessLineEndings(t,n)),t=[...t.split(f).slice(i)].join(f)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(n=this._config.beforeFirstChunk(t))!==void 0&&(t=n),this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+t,n=(this._partialLine="",this._handle.parse(i,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=n.meta.cursor,i=(this._finished||(this._partialLine=i.substring(t-this._baseIndex),this._baseIndex=t),n&&n.data&&(this._rowCount+=n.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),A)c.postMessage({results:n,workerId:o.WORKER_ID,finished:i});else if(k(this._config.chunk)&&!r){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=n=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!i||!k(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),i||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(t){k(this._config.error)?this._config.error(t):A&&this._config.error&&c.postMessage({workerId:o.WORKER_ID,error:t,finished:!1})}}function B(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),b.call(this,e),this._nextChunk=C?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),C||(t.onload=ie(this._chunkLoaded,this),t.onerror=ie(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!C),this._config.downloadRequestHeaders){var r,i=this._config.downloadRequestHeaders;for(r in i)t.setRequestHeader(r,i[r])}var n;this._config.chunkSize&&(n=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+n));try{t.send(this._config.downloadRequestBody)}catch(f){this._chunkError(f.message)}C&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function F(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),b.call(this,e);var t,r,i=typeof FileReader<"u";this.stream=function(n){this._input=n,r=n.slice||n.webkitSlice||n.mozSlice,i?((t=new FileReader).onload=ie(this._chunkLoaded,this),t.onerror=ie(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input,f=(this._config.chunkSize&&(f=Math.min(this._start+this._config.chunkSize,this._input.size),n=r.call(n,this._start,f)),t.readAsText(n,this._config.encoding));i||this._chunkLoaded({target:{result:f}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(t.error)}}function I(e){var t;b.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,i;if(!this._finished)return r=this._config.chunkSize,t=r?(i=t.substring(0,r),t.substring(r)):(i=t,""),this._finished=!t,this.parseChunk(i)}}function y(e){b.call(this,e=e||{});var t=[],r=!0,i=!1;this.pause=function(){b.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){b.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=ie(function(n){try{t.push(typeof n=="string"?n:n.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(f){this._streamError(f)}},this),this._streamError=ie(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=ie(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=ie(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function W(e){var t,r,i,n,f=Math.pow(2,53),M=-f,V=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,p=this,N=0,l=0,H=!1,d=!1,g=[],a={data:[],errors:[],meta:{}};function z(m){return e.skipEmptyLines==="greedy"?m.join("").trim()==="":m.length===1&&m[0].length===0}function P(){if(a&&i&&(G("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),i=!1),e.skipEmptyLines&&(a.data=a.data.filter(function(u){return!z(u)})),$()){let u=function(T,U){k(e.transformHeader)&&(T=e.transformHeader(T,U)),g.push(T)};if(a)if(Array.isArray(a.data[0])){for(var m=0;$()&&m<a.data.length;m++)a.data[m].forEach(u);a.data.splice(0,1)}else a.data.forEach(u)}function x(u,T){for(var U=e.header?{}:[],v=0;v<u.length;v++){var E=v,_=u[v],_=((Y,h)=>(R=>(e.dynamicTypingFunction&&e.dynamicTyping[R]===void 0&&(e.dynamicTyping[R]=e.dynamicTypingFunction(R)),(e.dynamicTyping[R]||e.dynamicTyping)===!0))(Y)?h==="true"||h==="TRUE"||h!=="false"&&h!=="FALSE"&&((R=>{if(V.test(R)&&(R=parseFloat(R),M<R&&R<f))return 1})(h)?parseFloat(h):Q.test(h)?new Date(h):h===""?null:h):h)(E=e.header?v>=g.length?"__parsed_extra":g[v]:E,_=e.transform?e.transform(_,E):_);E==="__parsed_extra"?(U[E]=U[E]||[],U[E].push(_)):U[E]=_}return e.header&&(v>g.length?G("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+v,l+T):v<g.length&&G("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+v,l+T)),U}var D;a&&(e.header||e.dynamicTyping||e.transform)&&(D=1,!a.data.length||Array.isArray(a.data[0])?(a.data=a.data.map(x),D=a.data.length):a.data=x(a.data,0),e.header&&a.meta&&(a.meta.fields=g),l+=D)}function $(){return e.header&&g.length===0}function G(m,x,D,u){m={type:m,code:x,message:D},u!==void 0&&(m.row=u),a.errors.push(m)}k(e.step)&&(n=e.step,e.step=function(m){a=m,$()?P():(P(),a.data.length!==0&&(N+=m.data.length,e.preview&&N>e.preview?r.abort():(a.data=a.data[0],n(a,p))))}),this.parse=function(m,x,D){var u=e.quoteChar||'"',u=(e.newline||(e.newline=this.guessLineEndings(m,u)),i=!1,e.delimiter?k(e.delimiter)&&(e.delimiter=e.delimiter(m),a.meta.delimiter=e.delimiter):((u=((T,U,v,E,_)=>{var Y,h,R,ae;_=_||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var le=0;le<_.length;le++){for(var ee,ce=_[le],K=0,te=0,q=0,J=(R=void 0,new oe({comments:E,delimiter:ce,newline:U,preview:10}).parse(T)),se=0;se<J.data.length;se++)v&&z(J.data[se])?q++:(ee=J.data[se].length,te+=ee,R===void 0?R=ee:0<ee&&(K+=Math.abs(ee-R),R=ee));0<J.data.length&&(te/=J.data.length-q),(h===void 0||K<=h)&&(ae===void 0||ae<te)&&1.99<te&&(h=K,Y=ce,ae=te)}return{successful:!!(e.delimiter=Y),bestDelimiter:Y}})(m,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=u.bestDelimiter:(i=!0,e.delimiter=o.DefaultDelimiter),a.meta.delimiter=e.delimiter),fe(e));return e.preview&&e.header&&u.preview++,t=m,r=new oe(u),a=r.parse(t,x,D),P(),H?{meta:{paused:!0}}:a||{meta:{paused:!1}}},this.paused=function(){return H},this.pause=function(){H=!0,r.abort(),t=k(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){p.streamer._halted?(H=!1,p.streamer.parseChunk(t,!0)):setTimeout(p.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,r.abort(),a.meta.aborted=!0,k(e.complete)&&e.complete(a),t=""},this.guessLineEndings=function(T,u){T=T.substring(0,1048576);var u=new RegExp(X(u)+"([^]*?)"+X(u),"gm"),D=(T=T.replace(u,"")).split("\r"),u=T.split(`
`),T=1<u.length&&u[0].length<D[0].length;if(D.length===1||T)return`
`;for(var U=0,v=0;v<D.length;v++)D[v][0]===`
`&&U++;return U>=D.length/2?`\r
`:"\r"}}function X(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oe(e){var t=(e=e||{}).delimiter,r=e.newline,i=e.comments,n=e.step,f=e.preview,M=e.fastMode,V=null,Q=!1,p=e.quoteChar==null?'"':e.quoteChar,N=p;if(e.escapeChar!==void 0&&(N=e.escapeChar),(typeof t!="string"||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),i===t)throw new Error("Comment character same as delimiter");i===!0?i="#":(typeof i!="string"||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var l=0,H=!1;this.parse=function(d,g,a){if(typeof d!="string")throw new Error("Input must be a string");var z=d.length,P=t.length,$=r.length,G=i.length,m=k(n),x=[],D=[],u=[],T=l=0;if(!d)return K();if(M||M!==!1&&d.indexOf(p)===-1){for(var U=d.split(r),v=0;v<U.length;v++){if(u=U[v],l+=u.length,v!==U.length-1)l+=r.length;else if(a)return K();if(!i||u.substring(0,G)!==i){if(m){if(x=[],ae(u.split(t)),te(),H)return K()}else ae(u.split(t));if(f&&f<=v)return x=x.slice(0,f),K(!0)}}return K()}for(var E=d.indexOf(t,l),_=d.indexOf(r,l),Y=new RegExp(X(N)+X(p),"g"),h=d.indexOf(p,l);;)if(d[l]===p)for(h=l,l++;;){if((h=d.indexOf(p,h+1))===-1)return a||D.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:l}),ee();if(h===z-1)return ee(d.substring(l,h).replace(Y,p));if(p===N&&d[h+1]===N)h++;else if(p===N||h===0||d[h-1]!==N){E!==-1&&E<h+1&&(E=d.indexOf(t,h+1));var R=le((_=_!==-1&&_<h+1?d.indexOf(r,h+1):_)===-1?E:Math.min(E,_));if(d.substr(h+1+R,P)===t){u.push(d.substring(l,h).replace(Y,p)),d[l=h+1+R+P]!==p&&(h=d.indexOf(p,l)),E=d.indexOf(t,l),_=d.indexOf(r,l);break}if(R=le(_),d.substring(h+1+R,h+1+R+$)===r){if(u.push(d.substring(l,h).replace(Y,p)),ce(h+1+R+$),E=d.indexOf(t,l),h=d.indexOf(p,l),m&&(te(),H))return K();if(f&&x.length>=f)return K(!0);break}D.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:l}),h++}}else if(i&&u.length===0&&d.substring(l,l+G)===i){if(_===-1)return K();l=_+$,_=d.indexOf(r,l),E=d.indexOf(t,l)}else if(E!==-1&&(E<_||_===-1))u.push(d.substring(l,E)),l=E+P,E=d.indexOf(t,l);else{if(_===-1)break;if(u.push(d.substring(l,_)),ce(_+$),m&&(te(),H))return K();if(f&&x.length>=f)return K(!0)}return ee();function ae(q){x.push(q),T=l}function le(q){var J=0;return J=q!==-1&&(q=d.substring(h+1,q))&&q.trim()===""?q.length:J}function ee(q){return a||(q===void 0&&(q=d.substring(l)),u.push(q),l=z,ae(u),m&&te()),K()}function ce(q){l=q,ae(u),u=[],_=d.indexOf(r,l)}function K(q){if(e.header&&!g&&x.length&&!Q){var J=x[0],se=Object.create(null),pe=new Set(J);let xe=!1;for(let ue=0;ue<J.length;ue++){let re=J[ue];if(se[re=k(e.transformHeader)?e.transformHeader(re,ue):re]){let de,be=se[re];for(;de=re+"_"+be,be++,pe.has(de););pe.add(de),J[ue]=de,se[re]++,xe=!0,(V=V===null?{}:V)[de]=re}else se[re]=1,J[ue]=re;pe.add(re)}xe&&console.warn("Duplicate headers found and renamed."),Q=!0}return{data:x,errors:D,meta:{delimiter:t,linebreak:r,aborted:H,truncated:!!q,cursor:T+(g||0),renamedHeaders:V}}}function te(){n(K()),x=[],D=[]}},this.abort=function(){H=!0},this.getCharIndex=function(){return l}}function Re(e){var t=e.data,r=w[t.workerId],i=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){i=!0,_e(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ye,resume:ye};if(k(r.userStep)){for(var f=0;f<t.results.data.length&&(r.userStep({data:t.results.data[f],errors:t.results.errors,meta:t.results.meta},n),!i);f++);delete t.results}else k(r.userChunk)&&(r.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!i&&_e(t.workerId,t.results)}function _e(e,t){var r=w[e];k(r.userComplete)&&r.userComplete(t),r.terminate(),delete w[e]}function ye(){throw new Error("Not implemented.")}function fe(e){if(typeof e!="object"||e===null)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=fe(e[t]);return r}function ie(e,t){return function(){e.apply(t,arguments)}}function k(e){return typeof e=="function"}return o.parse=function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(k(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!k(t.transform)&&t.transform,!t.worker||!o.WORKERS_SUPPORTED)return r=null,o.NODE_STREAM_INPUT,typeof e=="string"?(e=(i=>i.charCodeAt(0)!==65279?i:i.slice(1))(e),r=new(t.download?B:I)(t)):e.readable===!0&&k(e.read)&&k(e.on)?r=new y(t):(c.File&&e instanceof File||e instanceof Object)&&(r=new F(t)),r.stream(e);(r=(()=>{var i;return!!o.WORKERS_SUPPORTED&&(i=(()=>{var n=c.URL||c.webkitURL||null,f=j.toString();return o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",f,")();"],{type:"text/javascript"})))})(),(i=new c.Worker(i)).onmessage=Re,i.id=Z++,w[i.id]=i)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=k(t.step),t.chunk=k(t.chunk),t.complete=k(t.complete),t.error=k(t.error),delete t.worker,r.postMessage({input:e,config:t,workerId:r.id})},o.unparse=function(e,t){var r=!1,i=!0,n=",",f=`\r
`,M='"',V=M+M,Q=!1,p=null,N=!1,l=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||o.BAD_DELIMITERS.filter(function(g){return t.delimiter.indexOf(g)!==-1}).length||(n=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(Q=t.skipEmptyLines),typeof t.newline=="string"&&(f=t.newline),typeof t.quoteChar=="string"&&(M=t.quoteChar),typeof t.header=="boolean"&&(i=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");p=t.columns}t.escapeChar!==void 0&&(V=t.escapeChar+M),t.escapeFormulae instanceof RegExp?N=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(N=/^[=+\-@\t\r].*$/)}})(),new RegExp(X(M),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return H(null,e,Q);if(typeof e[0]=="object")return H(p||Object.keys(e[0]),e,Q)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||p),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),H(e.fields||[],e.data||[],Q);throw new Error("Unable to serialize unrecognized input");function H(g,a,z){var P="",$=(typeof g=="string"&&(g=JSON.parse(g)),typeof a=="string"&&(a=JSON.parse(a)),Array.isArray(g)&&0<g.length),G=!Array.isArray(a[0]);if($&&i){for(var m=0;m<g.length;m++)0<m&&(P+=n),P+=d(g[m],m);0<a.length&&(P+=f)}for(var x=0;x<a.length;x++){var D=($?g:a[x]).length,u=!1,T=$?Object.keys(a[x]).length===0:a[x].length===0;if(z&&!$&&(u=z==="greedy"?a[x].join("").trim()==="":a[x].length===1&&a[x][0].length===0),z==="greedy"&&$){for(var U=[],v=0;v<D;v++){var E=G?g[v]:v;U.push(a[x][E])}u=U.join("").trim()===""}if(!u){for(var _=0;_<D;_++){0<_&&!T&&(P+=n);var Y=$&&G?g[_]:_;P+=d(a[x][Y],_)}x<a.length-1&&(!z||0<D&&!T)&&(P+=f)}}return P}function d(g,a){var z,P;return g==null?"":g.constructor===Date?JSON.stringify(g).slice(1,25):(P=!1,N&&typeof g=="string"&&N.test(g)&&(g="'"+g,P=!0),z=g.toString().replace(l,V),(P=P||r===!0||typeof r=="function"&&r(g,a)||Array.isArray(r)&&r[a]||(($,G)=>{for(var m=0;m<G.length;m++)if(-1<$.indexOf(G[m]))return!0;return!1})(z,o.BAD_DELIMITERS)||-1<z.indexOf(n)||z.charAt(0)===" "||z.charAt(z.length-1)===" ")?M+z+M:z)}},o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!C&&!!c.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=oe,o.ParserHandle=W,o.NetworkStreamer=B,o.FileStreamer=F,o.StringStreamer=I,o.ReadableStreamStreamer=y,c.jQuery&&((S=c.jQuery).fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(f){if(!(S(this).prop("tagName").toUpperCase()==="INPUT"&&S(this).attr("type").toLowerCase()==="file"&&c.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)r.push({file:this.files[M],inputElem:this,instanceConfig:S.extend({},t)})}),i(),this;function i(){if(r.length===0)k(e.complete)&&e.complete();else{var f,M,V,Q,p=r[0];if(k(e.before)){var N=e.before(p.file,p.inputElem);if(typeof N=="object"){if(N.action==="abort")return f="AbortError",M=p.file,V=p.inputElem,Q=N.reason,void(k(e.error)&&e.error({name:f},M,V,Q));if(N.action==="skip")return void n();typeof N.config=="object"&&(p.instanceConfig=S.extend(p.instanceConfig,N.config))}else if(N==="skip")return void n()}var l=p.instanceConfig.complete;p.instanceConfig.complete=function(H){k(l)&&l(H,p.file,p.inputElem),n()},o.parse(p.file,p.instanceConfig)}}function n(){r.splice(0,1),i()}}),A&&(c.onmessage=function(e){e=e.data,o.WORKER_ID===void 0&&e&&(o.WORKER_ID=e.workerId),typeof e.input=="string"?c.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(c.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&c.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(B.prototype=Object.create(b.prototype)).constructor=B,(F.prototype=Object.create(b.prototype)).constructor=F,(I.prototype=Object.create(I.prototype)).constructor=I,(y.prototype=Object.create(b.prototype)).constructor=y,o})})(he)),he.exports}var Ge=Qe();const Se=Oe(Ge);function Ye(O){return new Promise((L,j)=>{Se.parse(O,{header:!0,skipEmptyLines:!0,complete:c=>{try{const S=c.data.map((C,A)=>{const w=Ze(C);return{id:`item-${Date.now()}-${A}`,type:(C["Issue Type"]||"").toLowerCase(),key:C["Issue key"]||"",summary:C.Summary||"",originalEstimate:w,parentKey:C["Parent key"]||null,labels:C.Labels||"",bestCase:null,worstCase:null,rangePercentOverride:null,collapsed:!0,parentId:null,children:[]}});L(S)}catch(S){j(new Error(`Failed to parse CSV: ${S.message}`))}},error:c=>{j(new Error(`CSV parsing error: ${c.message}`))}})})}function Ze(O){const L=["Original estimate","Original Estimate","Time Original Estimate","Original Estimate (seconds)","Time original estimate"];let j=null;for(const S of L)if(O[S]!=null&&O[S]!==""){j=O[S];break}if(j==null||j==="")return 0;const c=Number(j);return Number.isFinite(c)?Math.round(c/60):typeof j=="string"?Ie(j):0}function Xe(O){const L=["Issue Type","Issue key","Summary"];return new Promise((j,c)=>{Se.parse(O,{header:!0,preview:1,complete:S=>{const C=S.meta.fields||[],A=L.filter(w=>!C.includes(w));A.length>0?c(new Error(`Missing required columns: ${A.join(", ")}`)):j(!0)},error:S=>{c(new Error(`CSV validation error: ${S.message}`))}})})}function Ce(O){try{const L=JSON.parse(O);if(L.version&&L.items)return"estim"}catch{}return O.includes("Issue Type")&&O.includes("Issue key")?"jira-csv":"unknown"}function et(){const{getProjectData:O,loadProject:L,isDirty:j,items:c,setIsDirty:S}=me(),C=ne.useRef(null),[A,w]=ne.useState(!1),Z=async()=>{const F=O(),I=`${F.projectName.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.estim`;Ae(F,I),Fe(F),S(!1)},o=async F=>{const I=F.target.files?.[0];if(I){try{const y=await Ee(I);if(Ce(y)==="estim"){const X=await je(I);L(X)}else alert("Please select a valid .estim file")}catch(y){alert(`Failed to load file: ${y.message}`)}F.target.value=""}},b=()=>{C.current?.click()},B=()=>{window.confirm("Clear local autosave? You will lose unsaved work unless you have saved a .estim file.")&&(Pe(),alert("Autosave cleared. Reload the page to start fresh or import a file."))};return s.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Software Estimator"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Range-based project estimation tool"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{ref:C,type:"file",accept:".estim",onChange:o,className:"hidden"}),s.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(ke,{className:"w-4 h-4"}),"Load .estim"]}),s.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(Ne,{className:"w-4 h-4"}),"Import"]}),s.jsxs("button",{onClick:Z,disabled:c.length===0,className:`
              flex items-center gap-2 px-4 py-2 rounded-lg transition-colors
              ${c.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":j?"bg-blue-500 text-white hover:bg-blue-600":"bg-green-500 text-white hover:bg-green-600"}
            `,children:[s.jsx(De,{className:"w-4 h-4"}),j?"Save Changes":"Saved"]}),s.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 text-red-600 bg-white border border-red-300 rounded-lg hover:bg-red-50 transition-colors",title:"Clear local autosave",children:[s.jsx(Te,{className:"w-4 h-4"}),"Clear"]})]})]}),A&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>w(!1)}),s.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg border border-gray-200 w-full max-w-2xl mx-4 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Import Data"}),s.jsx("button",{onClick:()=>w(!1),className:"p-2 rounded hover:bg-gray-100",children:s.jsx(Le,{className:"w-5 h-5 text-gray-600"})})]}),s.jsx(ne.Suspense,{fallback:s.jsx("div",{className:"py-12 text-center text-gray-500",children:"Loadingâ€¦"}),children:s.jsx(tt,{})})]})]})]})}const tt=ne.lazy(()=>Je(()=>Promise.resolve().then(()=>rt),void 0,import.meta.url));function ge(){const{importJiraData:O,loadProject:L}=me(),[j,c]=ne.useState(!1),[S,C]=ne.useState(null),[A,w]=ne.useState(!1),Z=ne.useRef(null),o=async y=>{c(!0),C(null);try{const W=await Ee(y),X=Ce(W);if(X==="estim"){const oe=await je(y);L(oe)}else if(X==="jira-csv"){await Xe(W);const oe=await Ye(W);O(oe)}else throw new Error("Unknown file format. Please upload a Jira CSV or .estim file.")}catch(W){C(W.message)}finally{c(!1)}},b=y=>{y.preventDefault(),y.stopPropagation(),y.type==="dragenter"||y.type==="dragover"?w(!0):y.type==="dragleave"&&w(!1)},B=y=>{y.preventDefault(),y.stopPropagation(),w(!1),y.dataTransfer.files&&y.dataTransfer.files[0]&&o(y.dataTransfer.files[0])},F=y=>{y.preventDefault(),y.target.files&&y.target.files[0]&&o(y.target.files[0])},I=()=>{Z.current?.click()};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:`
          relative border-2 border-dashed rounded-lg p-8 text-center
          transition-colors duration-200
          ${A?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${j?"opacity-50 pointer-events-none":""}
        `,onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:B,children:[s.jsx("input",{ref:Z,type:"file",className:"hidden",accept:".csv,.estim",onChange:F,disabled:j}),s.jsx("div",{className:"flex flex-col items-center gap-4",children:j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),s.jsx("p",{className:"text-gray-600",children:"Processing file..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ke,{className:"w-12 h-12 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-medium text-gray-700 mb-1",children:"Drop your file here or click to browse"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Supports Jira CSV exports and .estim files"})]}),s.jsx("button",{onClick:I,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Choose File"})]})})]}),S&&s.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[s.jsx(Me,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-red-800",children:"Import Error"}),s.jsx("p",{className:"text-sm text-red-600 mt-1",children:S})]})]})]})}const rt=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));function st(){const{items:O}=me(),L=O.length>0;return s.jsxs("div",{className:"min-h-screen bg-gray-100",children:[s.jsx(et,{}),s.jsx("div",{className:"max-w-[1800px] mx-auto p-6",children:L?s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-3 space-y-6",children:s.jsx(qe,{})}),s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsx($e,{}),s.jsx(Be,{}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Import New Data"}),s.jsx(ge,{})]})]})]}):s.jsxs("div",{className:"max-w-2xl mx-auto mt-12",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Get Started"}),s.jsx("p",{className:"text-gray-600",children:"Import a Jira CSV export or load an existing .estim file to begin estimating"})]}),s.jsx(ge,{})]})})]})}function nt(){return s.jsxs(ze,{children:[s.jsx(Ue,{}),s.jsx(st,{})]})}He.createRoot(document.getElementById("root")).render(s.jsx(ne.StrictMode,{children:s.jsx(nt,{})}));
